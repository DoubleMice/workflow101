{
  "PostToolUse": [
    {
      "matcher": { "tools": ["BashTool"], "input_contains": "git commit" },
      "hooks": [{ "type": "command", "command": "echo 'HOOK: commit detected - run /review-bot to trigger code review'" }]
    },
    {
      "matcher": { "tools": ["WriteTool", "EditTool"], "input_contains": "review_bot/" },
      "hooks": [{ "type": "command", "command": "cd \"$(git rev-parse --show-toplevel)\" && python -m pytest tests/ -x -q 2>&1 | tail -5" }]
    }
  ],
  "PreToolUse": [
    {
      "matcher": { "tools": ["BashTool"], "input_contains": "git commit" },
      "hooks": [{ "type": "command", "command": "input=$(cat) && branch=$(git branch --show-current) && [ \"$branch\" != 'main' ] || (echo 'BLOCKED: Do not commit to main' && exit 1)" }]
    }
  ]
}
